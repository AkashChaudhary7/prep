<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row =>
                    row.some(cell => cell !== '' && cell !== null && cell !== undefined)
                );

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepTrack - Exam Preparation Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-600 {
            color: #d1d5db;
        }
        .dark .bg-gray-50 {
            background-color: #4b5563;
        }
        .dark .text-black {
            color: #f3f4f6;
        }
        .dark .bg-blue-600 {
            background-color: #1e40af;
        }
        .dark .hover\:bg-blue-700:hover {
            background-color: #1e3a8a;
        }
        .toast {
            transition: opacity 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans transition-colors duration-300">
    <div id="root"></div>

    <script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function loadFileData(filename) {
            if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
                try {
                    var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                    var firstSheetName = workbook.SheetNames[0];
                    var worksheet = workbook.Sheets[firstSheetName];
                    var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                    var filteredData = jsonData.filter(row =>
                        row.some(cell => cell !== '' && cell !== null && cell !== undefined)
                    );
                    var csv = XLSX.utils.aoa_to_sheet(filteredData);
                    csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                    return csv;
                } catch (e) {
                    console.error(e);
                    return "";
                }
            }
            return gk_fileData[filename] || "";
        }
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const initialExams = [
            {
                name: "SSC CGL",
                subjects: [
                    {
                        name: "General Intelligence and Reasoning",
                        topics: [
                            { name: "Analogies", subtopics: ["Semantic Analogies", "Symbolic Analogies"], completedSubtopics: [] },
                            { name: "Classification", subtopics: ["Number Classification", "Letter Classification"], completedSubtopics: [] },
                            { name: "Series", subtopics: ["Number Series", "Alphabet Series"], completedSubtopics: [] },
                            { name: "Coding-Decoding", subtopics: ["Letter Coding", "Number Coding"], completedSubtopics: [] },
                            { name: "Blood Relations", subtopics: ["Family Tree", "Coded Relations"], completedSubtopics: [] },
                            { name: "Direction Sense", subtopics: ["Direction Test", "Distance Test"], completedSubtopics: [] },
                            { name: "Syllogism", subtopics: ["Categorical Syllogism", "Conditional Syllogism"], completedSubtopics: [] },
                            { name: "Non-Verbal Reasoning", subtopics: ["Mirror Images", "Paper Folding"], completedSubtopics: [] },
                            { name: "Seating Arrangement", subtopics: ["Linear Arrangement", "Circular Arrangement"], completedSubtopics: [] },
                            { name: "Puzzles", subtopics: ["Floor Puzzles", "Scheduling Puzzles"], completedSubtopics: [] },
                            { name: "Venn Diagrams", subtopics: ["Logical Venn Diagrams", "Set Theory"], completedSubtopics: [] },
                            { name: "Word Formation", subtopics: ["Word Building", "Anagrams"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "General Awareness",
                        topics: [
                            { name: "History", subtopics: ["Ancient History", "Medieval History", "Modern History"], completedSubtopics: [] },
                            { name: "Geography", subtopics: ["Physical Geography", "Human Geography"], completedSubtopics: [] },
                            { name: "Polity", subtopics: ["Constitution", "Governance"], completedSubtopics: [] },
                            { name: "Economics", subtopics: ["Microeconomics", "Macroeconomics"], completedSubtopics: [] },
                            { name: "Science", subtopics: ["Physics", "Chemistry", "Biology"], completedSubtopics: [] },
                            { name: "Current Affairs", subtopics: ["National", "International"], completedSubtopics: [] },
                            { name: "Static GK", subtopics: ["Capitals", "Currencies"], completedSubtopics: [] },
                            { name: "Books and Authors", subtopics: ["Fiction", "Non-Fiction"], completedSubtopics: [] },
                            { name: "Important Dates", subtopics: ["National Days", "International Days"], completedSubtopics: [] },
                            { name: "Sports", subtopics: ["Cricket", "Football"], completedSubtopics: [] },
                            { name: "Awards and Honors", subtopics: ["National Awards", "International Awards"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Quantitative Aptitude",
                        topics: [
                            { name: "Number Systems", subtopics: ["LCM & HCF", "Divisibility"], completedSubtopics: [] },
                            { name: "Percentage", subtopics: ["Profit Percentage", "Loss Percentage"], completedSubtopics: [] },
                            { name: "Ratio & Proportion", subtopics: ["Simple Ratios", "Compound Ratios"], completedSubtopics: [] },
                            { name: "Profit & Loss", subtopics: ["Discount", "Marked Price"], completedSubtopics: [] },
                            { name: "Time & Work", subtopics: ["Pipes & Cisterns", "Work Efficiency"], completedSubtopics: [] },
                            { name: "Geometry", subtopics: ["Triangles", "Circles"], completedSubtopics: [] },
                            { name: "Algebra", subtopics: ["Linear Equations", "Quadratic Equations"], completedSubtopics: [] },
                            { name: "Data Interpretation", subtopics: ["Bar Graphs", "Pie Charts"], completedSubtopics: [] },
                            { name: "Trigonometry", subtopics: ["Heights & Distances", "Trigonometric Ratios"], completedSubtopics: [] },
                            { name: "Mensuration", subtopics: ["2D Mensuration", "3D Mensuration"], completedSubtopics: [] },
                            { name: "Simplification", subtopics: ["BODMAS", "Fractions"], completedSubtopics: [] },
                            { name: "Simple & Compound Interest", subtopics: ["SI Formulas", "CI Formulas"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "English Comprehension",
                        topics: [
                            { name: "Reading Comprehension", subtopics: ["Passage Analysis", "Theme Detection"], completedSubtopics: [] },
                            { name: "Grammar", subtopics: ["Tenses", "Articles"], completedSubtopics: [] },
                            { name: "Vocabulary", subtopics: ["Synonyms", "Antonyms"], completedSubtopics: [] },
                            { name: "Sentence Correction", subtopics: ["Error Spotting", "Sentence Improvement"], completedSubtopics: [] },
                            { name: "Idioms & Phrases", subtopics: ["Common Idioms", "Phrasal Verbs"], completedSubtopics: [] },
                            { name: "One Word Substitution", subtopics: ["Single Word Phrases", "Descriptive Words"], completedSubtopics: [] },
                            { name: "Synonyms & Antonyms", subtopics: ["Word Meanings", "Opposite Meanings"], completedSubtopics: [] },
                            { name: "Cloze Test", subtopics: ["Fill in the Blanks", "Context Clues"], completedSubtopics: [] },
                            { name: "Spotting Errors", subtopics: ["Grammatical Errors", "Punctuation Errors"], completedSubtopics: [] },
                            { name: "Para Jumbles", subtopics: ["Sentence Arrangement", "Paragraph Flow"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    }
                ]
            },
            {
                name: "RAS",
                subjects: [
                    {
                        name: "General Knowledge and General Studies",
                        topics: [
                            { name: "History of Rajasthan", subtopics: ["Ancient Rajasthan", "Medieval Rajasthan"], completedSubtopics: [] },
                            { name: "Art & Culture of Rajasthan", subtopics: ["Folk Dances", "Paintings"], completedSubtopics: [] },
                            { name: "Geography of Rajasthan", subtopics: ["Physical Features", "Climate"], completedSubtopics: [] },
                            { name: "Economy of Rajasthan", subtopics: ["Agriculture", "Industries"], completedSubtopics: [] },
                            { name: "Indian History", subtopics: ["Ancient India", "Modern India"], completedSubtopics: [] },
                            { name: "Indian Geography", subtopics: ["Physical Geography", "Economic Geography"], completedSubtopics: [] },
                            { name: "Polity", subtopics: ["Constitution", "Panchayati Raj"], completedSubtopics: [] },
                            { name: "Current Affairs", subtopics: ["State News", "National News"], completedSubtopics: [] },
                            { name: "Administrative System of Rajasthan", subtopics: ["State Administration", "Local Governance"], completedSubtopics: [] },
                            { name: "Rajasthan’s Economy", subtopics: ["Budget", "Planning"], completedSubtopics: [] },
                            { name: "Public Administration", subtopics: ["Administrative Reforms", "E-Governance"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "General Science",
                        topics: [
                            { name: "Physics", subtopics: ["Mechanics", "Optics"], completedSubtopics: [] },
                            { name: "Chemistry", subtopics: ["Organic Chemistry", "Inorganic Chemistry"], completedSubtopics: [] },
                            { name: "Biology", subtopics: ["Botany", "Zoology"], completedSubtopics: [] },
                            { name: "Environmental Science", subtopics: ["Ecology", "Pollution"], completedSubtopics: [] },
                            { name: "Science & Technology", subtopics: ["Recent Developments", "Innovations"], completedSubtopics: [] },
                            { name: "Computer Awareness", subtopics: ["Hardware", "Software"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Mental Ability",
                        topics: [
                            { name: "Logical Reasoning", subtopics: ["Statements & Conclusions", "Cause & Effect"], completedSubtopics: [] },
                            { name: "Analytical Reasoning", subtopics: ["Data Analysis", "Pattern Recognition"], completedSubtopics: [] },
                            { name: "Number Series", subtopics: ["Arithmetic Series", "Geometric Series"], completedSubtopics: [] },
                            { name: "Letter Series", subtopics: ["Alphabet Patterns", "Sequence"], completedSubtopics: [] },
                            { name: "Data Sufficiency", subtopics: ["Quantitative Data", "Logical Data"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    }
                ]
            },
            {
                name: "UPSC CSE",
                subjects: [
                    {
                        name: "General Studies I",
                        topics: [
                            { name: "Indian Heritage & Culture", subtopics: ["Art Forms", "Literature"], completedSubtopics: [] },
                            { name: "Modern Indian History", subtopics: ["Freedom Struggle", "Post-Independence"], completedSubtopics: [] },
                            { name: "World History", subtopics: ["World Wars", "Colonialism"], completedSubtopics: [] },
                            { name: "Indian Geography", subtopics: ["Physical Geography", "Human Geography"], completedSubtopics: [] },
                            { name: "World Geography", subtopics: ["Climatology", "Oceanography"], completedSubtopics: [] },
                            { name: "Social Issues", subtopics: ["Poverty", "Gender Equality"], completedSubtopics: [] },
                            { name: "Post-Independence Consolidation", subtopics: ["Reorganization", "Integration"], completedSubtopics: [] },
                            { name: "Salient Features of Indian Society", subtopics: ["Diversity", "Communalism"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "General Studies II",
                        topics: [
                            { name: "Indian Constitution", subtopics: ["Fundamental Rights", "DPSP"], completedSubtopics: [] },
                            { name: "Governance", subtopics: ["Transparency", "Accountability"], completedSubtopics: [] },
                            { name: "International Relations", subtopics: ["Bilateral Relations", "Global Organizations"], completedSubtopics: [] },
                            { name: "Social Justice", subtopics: ["Inclusion", "Empowerment"], completedSubtopics: [] },
                            { name: "Public Policy", subtopics: ["Health Policy", "Education Policy"], completedSubtopics: [] },
                            { name: "Parliament & State Legislatures", subtopics: ["Legislative Process", "Privileges"], completedSubtopics: [] },
                            { name: "Role of Civil Services", subtopics: ["Bureaucracy", "Administration"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "General Studies III",
                        topics: [
                            { name: "Economic Development", subtopics: ["Planning", "Liberalization"], completedSubtopics: [] },
                            { name: "Science & Technology", subtopics: ["Space Technology", "Biotechnology"], completedSubtopics: [] },
                            { name: "Environment", subtopics: ["Conservation", "Climate Change"], completedSubtopics: [] },
                            { name: "Security Issues", subtopics: ["Internal Security", "Cyber Security"], completedSubtopics: [] },
                            { name: "Disaster Management", subtopics: ["Preparedness", "Mitigation"], completedSubtopics: [] },
                            { name: "Agriculture", subtopics: ["Cropping Patterns", "Irrigation"], completedSubtopics: [] },
                            { name: "Infrastructure", subtopics: ["Energy", "Transportation"], completedSubtopics: [] },
                            { name: "Industry", subtopics: ["Manufacturing", "Services"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "General Studies IV",
                        topics: [
                            { name: "Ethics", subtopics: ["Moral Philosophy", "Applied Ethics"], completedSubtopics: [] },
                            { name: "Integrity", subtopics: ["Public Integrity", "Personal Integrity"], completedSubtopics: [] },
                            { name: "Aptitude", subtopics: ["Decision Making", "Problem Solving"], completedSubtopics: [] },
                            { name: "Case Studies", subtopics: ["Ethical Dilemmas", "Administrative Cases"], completedSubtopics: [] },
                            { name: "Emotional Intelligence", subtopics: ["Self-Awareness", "Empathy"], completedSubtopics: [] },
                            { name: "Public Service Values", subtopics: ["Duty", "Accountability"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    }
                ]
            },
            {
                name: "UGC NET Sociology",
                subjects: [
                    {
                        name: "Sociological Theory",
                        topics: [
                            { name: "Classical Theories", subtopics: ["Durkheim", "Weber"], completedSubtopics: [] },
                            { name: "Modern Theories", subtopics: ["Parsons", "Merton"], completedSubtopics: [] },
                            { name: "Postmodern Theories", subtopics: ["Baudrillard", "Lyotard"], completedSubtopics: [] },
                            { name: "Structural Functionalism", subtopics: ["Social System", "Function"], completedSubtopics: [] },
                            { name: "Marxist Sociology", subtopics: ["Class Struggle", "Alienation"], completedSubtopics: [] },
                            { name: "Symbolic Interactionism", subtopics: ["Mead", "Blumer"], completedSubtopics: [] },
                            { name: "Feminist Sociology", subtopics: ["Gender Inequality", "Patriarchy"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Research Methodology",
                        topics: [
                            { name: "Qualitative Methods", subtopics: ["Interviews", "Ethnography"], completedSubtopics: [] },
                            { name: "Quantitative Methods", subtopics: ["Surveys", "Statistics"], completedSubtopics: [] },
                            { name: "Sampling Techniques", subtopics: ["Random Sampling", "Stratified Sampling"], completedSubtopics: [] },
                            { name: "Data Analysis", subtopics: ["Descriptive Analysis", "Inferential Analysis"], completedSubtopics: [] },
                            { name: "Hypothesis Testing", subtopics: ["Null Hypothesis", "Alternative Hypothesis"], completedSubtopics: [] },
                            { name: "Research Design", subtopics: ["Experimental Design", "Observational Design"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Social Institutions",
                        topics: [
                            { name: "Family", subtopics: ["Nuclear Family", "Joint Family"], completedSubtopics: [] },
                            { name: "Marriage", subtopics: ["Monogamy", "Polygamy"], completedSubtopics: [] },
                            { name: "Religion", subtopics: ["Secularism", "Fundamentalism"], completedSubtopics: [] },
                            { name: "Education", subtopics: ["Formal Education", "Informal Education"], completedSubtopics: [] },
                            { name: "Economy", subtopics: ["Capitalism", "Socialism"], completedSubtopics: [] },
                            { name: "Polity", subtopics: ["Democracy", "Authoritarianism"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Social Change",
                        topics: [
                            { name: "Globalization", subtopics: ["Cultural Globalization", "Economic Globalization"], completedSubtopics: [] },
                            { name: "Urbanization", subtopics: ["Urban Growth", "Slums"], completedSubtopics: [] },
                            { name: "Social Movements", subtopics: ["Environmental Movements", "Women’s Movements"], completedSubtopics: [] },
                            { name: "Development Studies", subtopics: ["Sustainable Development", "Human Development"], completedSubtopics: [] },
                            { name: "Modernization", subtopics: ["Westernization", "Industrialization"], completedSubtopics: [] },
                            { name: "Westernization", subtopics: ["Cultural Influence", "Lifestyle Changes"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    }
                ]
            },
            {
                name: "Assistant Professor Sociology",
                subjects: [
                    {
                        name: "Sociological Concepts",
                        topics: [
                            { name: "Social Stratification", subtopics: ["Class", "Caste"], completedSubtopics: [] },
                            { name: "Culture", subtopics: ["Norms", "Values"], completedSubtopics: [] },
                            { name: "Socialization", subtopics: ["Primary Socialization", "Secondary Socialization"], completedSubtopics: [] },
                            { name: "Deviance", subtopics: ["Crime", "Social Control"], completedSubtopics: [] },
                            { name: "Social Control", subtopics: ["Formal Control", "Informal Control"], completedSubtopics: [] },
                            { name: "Social Mobility", subtopics: ["Vertical Mobility", "Horizontal Mobility"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Indian Society",
                        topics: [
                            { name: "Caste System", subtopics: ["Varna", "Jati"], completedSubtopics: [] },
                            { name: "Tribal Communities", subtopics: ["Scheduled Tribes", "Tribal Culture"], completedSubtopics: [] },
                            { name: "Rural Sociology", subtopics: ["Village Structure", "Agrarian Relations"], completedSubtopics: [] },
                            { name: "Urban Sociology", subtopics: ["Urbanization", "Migration"], completedSubtopics: [] },
                            { name: "Gender Issues", subtopics: ["Patriarchy", "Feminism"], completedSubtopics: [] },
                            { name: "Secularism", subtopics: ["Religious Pluralism", "State Policy"], completedSubtopics: [] },
                            { name: "Communalism", subtopics: ["Religious Conflicts", "Social Harmony"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    },
                    {
                        name: "Contemporary Issues",
                        topics: [
                            { name: "Globalization", subtopics: ["Cultural Impact", "Economic Impact"], completedSubtopics: [] },
                            { name: "Environmental Sociology", subtopics: ["Climate Change", "Conservation"], completedSubtopics: [] },
                            { name: "Science & Technology", subtopics: ["Digital Divide", "Innovation"], completedSubtopics: [] },
                            { name: "Media & Society", subtopics: ["Social Media", "Mass Media"], completedSubtopics: [] },
                            { name: "Migration", subtopics: ["Internal Migration", "International Migration"], completedSubtopics: [] },
                            { name: "Social Inequality", subtopics: ["Economic Disparity", "Social Exclusion"], completedSubtopics: [] }
                        ],
                        completedTopics: [],
                        driveLinks: {}
                    }
                ]
            }
        ];

        function App() {
            const [exams, setExams] = useState(initialExams);
            const [deadlines, setDeadlines] = useState([]);
            const [studySessions, setStudySessions] = useState([]);
            const [mockTests, setMockTests] = useState([]);
            const [searchQuery, setSearchQuery] = useState("");
            const [currentPage, setCurrentPage] = useState("home");
            const [quote, setQuote] = useState("Success is not final, failure is not fatal: It is the courage to continue that counts.");
            const [expandedSubjects, setExpandedSubjects] = useState({});
            const [expandedTopics, setExpandedTopics] = useState({});
            const [theme, setTheme] = useState("light");
            const [undoStack, setUndoStack] = useState([]);
            const [timer, setTimer] = useState({ running: false, startTime: null, sessionName: "" });
            const [notification, setNotification] = useState(null);

            const quotes = [
                "Success is not final, failure is not fatal: It is the courage to continue that counts.",
                "The only way to do great work is to love what you do.",
                "Believe you can and you're halfway there."
            ];

            useEffect(() => {
                const interval = setInterval(() => {
                    setQuote(quotes[Math.floor(Math.random() * quotes.length)]);
                }, 30000);
                return () => clearInterval(interval);
            }, []);

            useEffect(() => {
                document.body.classList.toggle("dark", theme === "dark");
            }, [theme]);

            useEffect(() => {
                if (notification) {
                    const timeout = setTimeout(() => setNotification(null), 3000);
                    return () => clearTimeout(timeout);
                }
            }, [notification]);

            const addExam = (examName, subjects) => {
                if (!examName || subjects.length === 0 || subjects.some(s => !s.name || s.topics.length === 0)) {
                    setNotification({ type: "error", message: "Please provide a valid exam name and at least one subject with topics." });
                    return;
                }
                const newExam = { 
                    name: examName, 
                    subjects: subjects.map(sub => ({ 
                        ...sub, 
                        topics: sub.topics.map(topic => ({
                            name: topic.name,
                            subtopics: topic.subtopics || [],
                            completedSubtopics: []
                        })),
                        completedTopics: [], 
                        driveLinks: {} 
                    })) 
                };
                setExams([...exams, newExam]);
                setNotification({ type: "success", message: `Exam "${examName}" added successfully!` });
                setCurrentPage("home");
            };

            const addDeadline = (examName, date) => {
                setDeadlines([...deadlines, { examName, date }]);
            };

            const toggleTopicCompletion = (examIndex, subjectIndex, topicName) => {
                const newExams = [...exams];
                const completedTopics = newExams[examIndex].subjects[subjectIndex].completedTopics;
                if (completedTopics.includes(topicName)) {
                    newExams[examIndex].subjects[subjectIndex].completedTopics = completedTopics.filter(t => t !== topicName);
                } else {
                    newExams[examIndex].subjects[subjectIndex].completedTopics.push(topicName);
                }
                setExams(newExams);
            };

            const toggleSubtopicCompletion = (examIndex, subjectIndex, topicIndex, subtopic) => {
                const newExams = [...exams];
                const completedSubtopics = newExams[examIndex].subjects[subjectIndex].topics[topicIndex].completedSubtopics;
                if (completedSubtopics.includes(subtopic)) {
                    newExams[examIndex].subjects[subjectIndex].topics[topicIndex].completedSubtopics = completedSubtopics.filter(s => s !== subtopic);
                } else {
                    newExams[examIndex].subjects[subjectIndex].topics[topicIndex].completedSubtopics.push(subtopic);
                }
                setExams(newExams);
            };

            const addStudySession = (name, duration) => {
                const date = new Date().toISOString().split('T')[0];
                setStudySessions([...studySessions, { name, duration, date }]);
            };

            const startStudySession = (name) => {
                setTimer({ running: true, startTime: new Date(), sessionName: name });
            };

            const stopStudySession = () => {
                if (timer.running) {
                    const endTime = new Date();
                    const duration = Math.round((endTime - timer.startTime) / 60000);
                    addStudySession(timer.sessionName, duration);
                    setTimer({ running: false, startTime: null, sessionName: "" });
                }
            };

            const addMockTest = (examName, subjectName, score, total) => {
                const date = new Date().toISOString().split('T')[0];
                setMockTests([...mockTests, { examName, subjectName, score, total, date }]);
            };

            const addDriveLink = (examIndex, subjectIndex, topic, link) => {
                const newExams = [...exams];
                newExams[examIndex].subjects[subjectIndex].driveLinks[topic] = link;
                setExams(newExams);
            };

            const deleteSubject = (examIndex, subjectIndex) => {
                const newExams = [...exams];
                const deletedSubject = newExоп
                newExams[examIndex].subjects[subjectIndex];
                newExams[examIndex].subjects.splice(subjectIndex, 1);
                setExams(newExams);
                setUndoStack([...undoStack, { type: "subject", examIndex, subjectIndex, data: deletedSubject }]);
            };

            const deleteTopic = (examIndex, subjectIndex, topicName) => {
                const newExams = [...exams];
                const topicIndex = newExams[examIndex].subjects[subjectIndex].topics.findIndex(t => t.name === topicName);
                const deletedTopic = newExams[examIndex].subjects[subjectIndex].topics[topicIndex];
                newExams[examIndex].subjects[subjectIndex].topics = newExams[examIndex].subjects[subjectIndex].topics.filter(t => t.name !== topicName);
                newExams[examIndex].subjects[subjectIndex].completedTopics = newExams[examIndex].subjects[subjectIndex].completedTopics.filter(t => t !== topicName);
                delete newExams[examIndex].subjects[subjectIndex].driveLinks[topicName];
                setExams(newExams);
                setUndoStack([...undoStack, { type: "topic", examIndex, subjectIndex, topicIndex, data: deletedTopic }]);
            };

            const deleteSubtopic = (examIndex, subjectIndex, topicIndex, subtopic) => {
                const newExams = [...exams];
                const deletedSubtopic = subtopic;
                newExams[examIndex].subjects[subjectIndex].topics[topicIndex].subtopics = 
                    newExams[examIndex].subjects[subjectIndex].topics[topicIndex].subtopics.filter(s => s !== subtopic);
                newExams[examIndex].subjects[subjectIndex].topics[topicIndex].completedSubtopics = 
                    newExams[examIndex].subjects[subjectIndex].topics[topicIndex].completedSubtopics.filter(s => s !== subtopic);
                setExams(newExams);
                setUndoStack([...undoStack, { type: "subtopic", examIndex, subjectIndex, topicIndex, data: deletedSubtopic }]);
            };

            const undoDelete = () => {
                if (undoStack.length === 0) return;
                const lastAction = undoStack[undoStack.length - 1];
                const newExams = [...exams];
                if (lastAction.type === "subject") {
                    newExams[lastAction.examIndex].subjects.splice(lastAction.subjectIndex, 0, lastAction.data);
                } else if (lastAction.type === "topic") {
                    newExams[lastAction.examIndex].subjects[lastAction.subjectIndex].topics.splice(lastAction.topicIndex, 0, lastAction.data);
                } else if (lastAction.type === "subtopic") {
                    newExams[lastAction.examIndex].subjects[lastAction.subjectIndex].topics[lastAction.topicIndex].subtopics.push(lastAction.data);
                }
                setExams(newExams);
                setUndoStack(undoStack.slice(0, -1));
            };

            const addSubtopic = (examIndex, subjectIndex, topicIndex, subtopic) => {
                const newExams = [...exams];
                newExams[examIndex].subjects[subjectIndex].topics[topicIndex].subtopics.push(subtopic);
                setExams(newExams);
            };

            const exportToExcel = (data, filename) => {
                const ws = XLSX.utils.json_to_sheet(data);
                const wb = XLSX.utils.book_new();
                XLSX.utils.book_append_sheet(wb, ws, "Sheet1");
                XLSX.write(wb, `${filename}.xlsx`);
            };

            const exportToPDF = (data, filename) => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                let y = 10;
                doc.text(filename, 10, y);
                y += 10;
                data.forEach(item => {
                    doc.text(JSON.stringify(item), 10, y);
                    y += 10;
                });
                doc.save(`${filename}.pdf`);
            };

            const getSubjectProgress = (subject) => {
                const totalSubtopics = subject.topics.reduce((sum, topic) => sum + topic.subtopics.length, 0);
                const totalCompletedSubtopics = subject.topics.reduce((sum, topic) => sum + topic.completedSubtopics.length, 0);
                if (totalSubtopics === 0) return 0;
                return (totalCompletedSubtopics / totalSubtopics) * 100;
            };

            const getExamProgress = (exam) => {
                const totalSubtopics = exam.subjects.reduce((sum, subject) => 
                    sum + subject.topics.reduce((s, topic) => s + topic.subtopics.length, 0), 0);
                const totalCompletedSubtopics = exam.subjects.reduce((sum, subject) => 
                    sum + subject.topics.reduce((s, topic) => s + topic.completedSubtopics.length, 0), 0);
                if (totalSubtopics === 0) return 0;
                return (totalCompletedSubtopics / totalSubtopics) * 100;
            };

            const getDaysUntil = (date) => {
                const today = new Date();
                const examDate = new Date(date);
                const diffTime = examDate - today;
                return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            };

            const toggleSubjectExpansion = (key) => {
                setExpandedSubjects(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const toggleTopicExpansion = (key) => {
                setExpandedTopics(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const filteredExams = exams.filter(exam =>
                exam.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                exam.subjects.some(subject =>
                    subject.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    subject.topics.some(topic =>
                        topic.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                        topic.subtopics.some(subtopic =>
                            subtopic.toLowerCase().includes(searchQuery.toLowerCase())
                        )
                    )
                )
            );

            const renderHome = () => (
                <div className="container mx-auto px-4 py-8">
                    {notification && (
                        <div className={`fixed top-4 right-4 p-4 rounded-lg text-white toast ${notification.type === "success" ? "bg-green-500" : "bg-red-500"}`}>
                            {notification.message}
                        </div>
                    )}
                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <h2 className="text-2xl font-bold mb-4">Motivational Quote</h2>
                        <p className="text-lg italic">"{quote}"</p>
                    </div>

                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <h2 className="text-2xl font-bold mb-4">Upcoming Deadlines</h2>
                        {deadlines.length > 0 ? (
                            deadlines.map((deadline, index) => (
                                <div key={index} className="mb-2 p-2 bg-gray-50 rounded-lg text-sm">
                                    <p>{deadline.examName}: {getDaysUntil(deadline.date)} days remaining (Date: {deadline.date})</p>
                                </div>
                            ))
                        ) : (
                            <p>No deadlines set.</p>
                        )}
                    </div>

                    <div className="mb-6">
                        <input
                            type="text"
                            placeholder="Search topics/subtopics..."
                            className="w-full p-2 border rounded-lg text-sm"
                            value={searchQuery}
                            onChange={(e) => setSearchQuery(e.target.value)}
                        />
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {filteredExams.map((exam, examIndex) => (
                            <div key={exam.name} className="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition">
                                <div className="relative pt-1 mb-2">
                                    <div className="overflow-hidden h-2 mb-2 text-xs flex rounded bg-gray-200">
                                        <div
                                            style={{ width: `${getExamProgress(exam)}%` }}
                                            className="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"
                                        ></div>
                                    </div>
                                    <p className="text-sm text-gray-600">{getExamProgress(exam).toFixed(2)}% Complete</p>
                                </div>
                                <h3 className="text-xl font-bold mb-2">{exam.name}</h3>
                                {exam.subjects.map((subject, subjectIndex) => {
                                    const subjectKey = `${examIndex}-${subjectIndex}`;
                                    const isSubjectExpanded = expandedSubjects[subjectKey];
                                    return (
                                        <div key={subject.name} className="mb-4">
                                            <div className="relative pt-1 mb-2">
                                                <div className="overflow-hidden h-2 mb-2 text-xs flex rounded bg-gray-200">
                                                    <div
                                                        style={{ width: `${getSubjectProgress(subject)}%` }}
                                                        className="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"
                                                    ></div>
                                                </div>
                                                <p className="text-sm text-gray-600">{getSubjectProgress(subject).toFixed(2)}% Complete</p>
                                            </div>
                                            <h4 
                                                className="text-lg font-semibold cursor-pointer hover:text-blue-600"
                                                onClick={() => toggleSubjectExpansion(subjectKey)}
                                            >
                                                {subject.name}
                                            </h4>
                                            {isSubjectExpanded && (
                                                <div className="mt-2">
                                                    {subject.topics.map((topic, topicIndex) => {
                                                        const topicKey = `${examIndex}-${subjectIndex}-${topicIndex}`;
                                                        const isTopicExpanded = expandedTopics[topicKey];
                                                        return (
                                                            <div key={topic.name} className="mb-2 ml-4">
                                                                <div 
                                                                    className="flex items-center justify-between cursor-pointer bg-gray-100 p-2 rounded-lg text-sm"
                                                                    onClick={() => toggleTopicExpansion(topicKey)}
                                                                >
                                                                    <div className="flex items-center">
                                                                        {subject.driveLinks[topic.name] ? (
                                                                            <a
                                                                                href={subject.driveLinks[topic.name]}
                                                                                target="_blank"
                                                                                rel="noopener noreferrer"
                                                                                className="text-blue-600 underline mr-2"
                                                                            >
                                                                                {topic.name}
                                                                            </a>
                                                                        ) : (
                                                                            <span>{topic.name}</span>
                                                                        )}
                                                                    </div>
                                                                    <button
                                                                        className={`px-2 py-1 rounded text-xs ${
                                                                            subject.completedTopics.includes(topic.name)
                                                                                ? "bg-green-500 text-white"
                                                                                : "bg-gray-300 text-gray-700"
                                                                        }`}
                                                                        onClick={(e) => {
                                                                            e.stopPropagation();
                                                                            toggleTopicCompletion(examIndex, subjectIndex, topic.name);
                                                                        }}
                                                                    >
                                                                        {subject.completedTopics.includes(topic.name) ? "Done" : "Mark Done"}
                                                                    </button>
                                                                </div>
                                                                {isTopicExpanded && (
                                                                    <div className="ml-4 mt-2">
                                                                        {topic.subtopics.map(subtopic => (
                                                                            <div
                                                                                key={subtopic}
                                                                                className="flex items-center justify-between text-sm py-1"
                                                                            >
                                                                                <span>{subtopic}</span>
                                                                                <button
                                                                                    className={`px-2 py-1 rounded text-xs ${
                                                                                        topic.completedSubtopics.includes(subtopic)
                                                                                            ? "bg-green-500 text-white"
                                                                                            : "bg-gray-300 text-gray-700"
                                                                                    }`}
                                                                                    onClick={() => toggleSubtopicCompletion(examIndex, subjectIndex, topicIndex, subtopic)}
                                                                                >
                                                                                    {topic.completedSubtopics.includes(subtopic) ? "Done" : "Mark Done"}
                                                                                </button>
                                                                            </div>
                                                                        ))}
                                                                    </div>
                                                                )}
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                                <div className="dropdown relative">
                                    <button className="bg-green-500 text-white px-4 py-2 rounded-lg w-full text-left text-sm">
                                        Export Progress
                                    </button>
                                    <div className="dropdown-menu hidden absolute bg-white shadow-lg rounded-lg mt-1 w-full z-10">
                                        <div
                                            className="px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm"
                                            onClick={() => exportToExcel(exam.subjects.map(s => ({
                                                Subject: s.name,
                                                Progress: `${getSubjectProgress(s).toFixed(2)}%`,
                                                CompletedTopics: s.completedTopics.join(", "),
                                                CompletedSubtopics: s.topics.map(t => `${t.name}: ${t.completedSubtopics.join(", ")}`).join("; ")
                                            })), `${exam.name}_Progress`)}
                                        >
                                            Excel
                                        </div>
                                        <div
                                            className="px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm"
                                            onClick={() => exportToPDF(exam.subjects.map(s => ({
                                                Subject: s.name,
                                                Progress: `${getSubjectProgress(s).toFixed(2)}%`,
                                                CompletedTopics: s.completedTopics.join(", "),
                                                CompletedSubtopics: s.topics.map(t => `${t.name}: ${t.completedSubtopics.join(", ")}`).join("; ")
                                            })), `${exam.name}_Progress`)}
                                        >
                                            PDF
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                    <footer className="mt-8 text-center text-gray-600 text-sm">
                        Created By Akash Chaudhary ❤️
                    </footer>
                </div>
            );

            const renderDeadlines = () => (
                <div className="container mx-auto px-4 py-8">
                    <h2 className="text-2xl font-bold mb-6">Exam Deadlines</h2>
                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <h3 className="text-xl font-semibold mb-4">Add New Deadline</h3>
                        <div className="flex gap-4">
                            <select
                                className="p-2 border rounded-lg text-sm"
                                id="deadlineExam"
                            >
                                {exams.map(exam => (
                                    <option key={exam.name} value={exam.name}>{exam.name}</option>
                                ))}
                            </select>
                            <input
                                type="date"
                                className="p-2 border rounded-lg text-sm"
                                id="deadlineDate"
                            />
                            <button
                                className="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => {
                                    const examName = document.getElementById("deadlineExam").value;
                                    const date = document.getElementById("deadlineDate").value;
                                    addDeadline(examName, date);
                                }}
                            >
                                Add Deadline
                            </button>
                        </div>
                    </div>
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <h3 className="text-xl font-semibold mb-4">Upcoming Deadlines</h3>
                        {deadlines.map((deadline, index) => (
                            <div key={index} className="mb-2 p-2 bg-gray-50 rounded-lg text-sm">
                                <p>{deadline.examName}: {getDaysUntil(deadline.date)} days remaining (Date: {deadline.date})</p>
                            </div>
                        ))}
                    </div>
                    <footer className="mt-8 text-center text-gray-600 text-sm">
                        Created By Akash Chaudhary ❤️
                    </footer>
                </div>
            );

            const renderStudyTracker = () => (
                <div className="container mx-auto px-4 py-8">
                    <h2 className="text-2xl font-bold mb-6">Study Time Tracker</h2>
                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <h3 className="text-xl font-semibold mb-4">Add Study Session</h3>
                        <div className="flex gap-4">
                            <input
                                type="text"
                                placeholder="Session Name"
                                className="p-2 border rounded-lg text-sm"
                                id="sessionName"
                                disabled={timer.running}
                            />
                            {timer.running ? (
                                <button
                                    className="bg-red-500 text-white px-4 py-2 rounded-lg text-sm"
                                    onClick={stopStudySession}
                                >
                                    Stop Session
                                </button>
                            ) : (
                                <button
                                    className="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm"
                                    onClick={() => {
                                        const name = document.getElementById("sessionName").value;
                                        if (name) startStudySession(name);
                                    }}
                                >
                                    Start Session
                                </button>
                            )}
                            <input
                                type="number"
                                placeholder="Duration (minutes)"
                                className="p-2 border rounded-lg text-sm"
                                id="sessionDuration"
                            />
                            <button
                                className="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => {
                                    const name = document.getElementById("sessionName").value;
                                    const duration = parseInt(document.getElementById("sessionDuration").value);
                                    addStudySession(name, duration);
                                }}
                            >
                                Add Manual Session
                            </button>
                        </div>
                    </div>
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <h3 className="text-xl font-semibold mb-4">Study Sessions</h3>
                        <div className="mb-4">
                            <h4 className="text-lg font-semibold">Daily Totals</h4>
                            {Object.entries(
                                studySessions.reduce((acc, session) => {
                                    acc[session.date] = (acc[session.date] || 0) + session.duration;
                                    return acc;
                                }, {})
                            ).map(([date, total]) => (
                                <div key={date} className="mb-2 p-2 bg-gray-50 rounded-lg text-sm">
                                    <p>{date}: {Math.floor(total / 60)}h {total % 60}m</p>
                                </div>
                            ))}
                        </div>
                        <div className="mb-4">
                            <h4 className="text-lg font-semibold">Monthly Totals</h4>
                            {Object.entries(
                                studySessions.reduce((acc, session) => {
                                    const month = new Date(session.date).toLocaleString('default', { month: 'long', year: 'numeric' });
                                    acc[month] = (acc[month] || 0) + session.duration;
                                    return acc;
                                }, {})
                            ).map(([month, total]) => (
                                <div key={month} className="mb-2 p-2 bg-gray-50 rounded-lg text-sm">
                                    <p>{month}: {Math.floor(total / 60)}h {total % 60}m</p>
                                </div>
                            ))}
                        </div>
                        <div className="flex gap-4">
                            <button
                                className="bg-green-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => exportToExcel(studySessions.map(s => ({
                                    ...s,
                                    duration: `${Math.floor(s.duration / 60)}h ${s.duration % 60}m`
                                })), "Study_Sessions")}
                            >
                                Export to Excel
                            </button>
                            <button
                                className="bg-green-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => exportToPDF(studySessions.map(s => ({
                                    ...s,
                                    duration: `${Math.floor(s.duration / 60)}h ${s.duration % 60}m`
                                })), "Study_Sessions")}
                            >
                                Export to PDF
                            </button>
                        </div>
                    </div>
                    <footer className="mt-8 text-center text-gray-600 text-sm">
                        Created By Akash Chaudhary ❤️
                    </footer>
                </div>
            );

            const renderMockTests = () => (
                <div className="container mx-auto px-4 py-8">
                    <h2 className="text-2xl font-bold mb-6">Mock Test Scores</h2>
                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <h3 className="text-xl font-semibold mb-4">Add Mock Test Score</h3>
                        <div className="flex gap-4 flex-wrap">
                            <select
                                className="p-2 border rounded-lg text-sm"
                                id="mockExam"
                            >
                                {exams.map(exam => (
                                    <option key={exam.name} value={exam.name}>{exam.name}</option>
                                ))}
                            </select>
                            <select
                                className="p-2 border rounded-lg text-sm"
                                id="mockSubject"
                            >
                                {exams.flatMap(exam => exam.subjects).map(subject => (
                                    <option key={subject.name} value={subject.name}>{subject.name}</option>
                                ))}
                            </select>
                            <input
                                type="number"
                                placeholder="Score"
                                className="p-2 border rounded-lg text-sm"
                                id="mockScore"
                            />
                            <input
                                type="number"
                                placeholder="Total Marks"
                                className="p-2 border rounded-lg text-sm"
                                id="mockTotal"
                            />
                            <button
                                className="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => {
                                    const examName = document.getElementById("mockExam").value;
                                    const subjectName = document.getElementById("mockSubject").value;
                                    const score = parseInt(document.getElementById("mockScore").value);
                                    const total = parseInt(document.getElementById("mockTotal").value);
                                    if (examName && subjectName && score >= 0 && total > 0) {
                                        addMockTest(examName, subjectName, score, total);
                                    }
                                }}
                            >
                                Add Score
                            </button>
                        </div>
                    </div>
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <h3 className="text-xl font-semibold mb-4">Mock Test Scores</h3>
                        {mockTests.map((test, index) => (
                            <div key={index} className="mb-2 p-2 bg-gray-50 rounded-lg text-sm">
                                <p>{test.date} - {test.examName} ({test.subjectName}): {test.score}/{test.total} ({((test.score / test.total) * 100).toFixed(2)}%)</p>
                            </div>
                        ))}
                        <div className="flex gap-4 mt-4">
                            <button
                                className="bg-green-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => exportToExcel(mockTests.map(t => ({
                                    Date: t.date,
                                    Exam: t.examName,
                                    Subject: t.subjectName,
                                    Score: t.score,
                                    Total: t.total,
                                    Percentage: ((t.score / t.total) * 100).toFixed(2) + '%'
                                })), "Mock_Test_Scores")}
                            >
                                Export to Excel
                            </button>
                            <button
                                className="bg-green-500 text-white px-4 py-2 rounded-lg text-sm"
                                onClick={() => exportToPDF(mockTests.map(t => ({
                                    Date: t.date,
                                    Exam: t.examName,
                                    Subject: t.subjectName,
                                    Score: t.score,
                                    Total: t.total,
                                    Percentage: ((t.score / t.total) * 100).toFixed(2) + '%'
                                })), "Mock_Test_Scores")}
                            >
                                Export to PDF
                            </button>
                        </div>
                    </div>
                    <footer className="mt-8 text-center text-gray-600 text-sm">
                        Created By Akash Chaudhary ❤️
                    </footer>
                </div>
            );

            const renderProgressDashboard = () => (
                <div className="container mx-auto px-4 py-8">
                    <h2 className="text-2xl font-bold mb-6">Progress Dashboard</h2>
                    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
                        <h3 className="text-xl font-semibold mb-4">Exam Progress</h3>
                        <canvas id="examProgressChart" className="mb-4"></canvas>
                        <h3 className="text-xl font-semibold mb-4">Study Time (Monthly)</h3>
                        <canvas id="studyTimeChart" className="mb-4"></canvas>
                    </div>
                    <footer className="mt-8 text-center text-gray-600 text-sm">
                        Created By Akash Chaudhary ❤️
                    </footer>
                </div>
            );

            const renderAddExam = () => (
                <div className="container mx-auto px-4 py-8">
                    <h2 className="text-2xl font-bold mb-6">Add New Exam</h2>
                    <div className="bg-white rounded-lg shadow-md p-6">
                        <div className="mb-4">
                            <label className="block text-lg font-semibold mb-2">Exam Name</label>
                            <input
                                type="text"
                                className="w-full p-2 border rounded-lg text-sm"
                                id="examName"
                            />
                        </div>
                        <div className="mb-4">
                            <label className="block text-lg font-semibold mb-2">Subjects</label>
                            <div id="subjectsContainer">
                                <div className="subject mb-2 flex gap-2 flex-wrap items-center">
                                    <input
                                        type="text"
                                        placeholder="Subject Name"
                                        className="p-2 border rounded-lg flex-1 text-sm"
                                        data-type="subjectName"
                                    />
                                    <input
                                        type="text"
                                        placeholder="Topics (comma-separated)"
                                        className="p-2 border rounded-lg flex-1 text-sm"
                                        data-type="topics"
                                    />
                                    <input
                                        type="text"
                                        placeholder="Subtopics (comma-separated, optional)"
                                        className="p-2 border rounded-lg flex-1 text-sm"
                                        data-type="subtopics"
                                    />
                                    <button
                                        className="bg-red-500 text-white px-4 py-2 rounded-lg text-sm"
                                        onClick={(e) => e.target.parentElement.remove()}
                                    >
                                        Delete Subject
                                    </button>
                                </div>
                            </div>
                            <button
                                className="bg-blue-500 text-white px-4 py-2 rounded-lg mt-2 text-sm"
                                onClick={() => {
                                    const container = document.getElementById("subjectsContainer");
                                    const newSubject = document.createElement("div");
                                    newSubject.className = "subject mb-2 flex gap-2 flex-wrap items-center";
                                    newSubject.innerHTML = `
                                        <input type="text" placeholder="Subject Name" class="p-2 border rounded-lg flex-1 text-sm" data-type="subjectName">
                                        <input type="text" placeholder="Topics (comma-separated)" class="p-2 border rounded-lg flex-1 text-sm" data-type="topics">
                                        <input type="text" placeholder="Subtopics (comma-separated, optional)" class="p-2 border rounded-lg flex-1 text-sm" data-type="subtopics">
                                        <button class="bg-red-500 text-white px-4 py-2 rounded-lg text-sm" onclick="this.parentElement.remove()">Delete Subject</button>
                                    `;
                                    container.appendChild(newSubject);
                                }}
                            >
                                Add Subject
                            </button>
                        </div>
                        <div className="mb-4">
                            <label className="block text-lg font-semibold mb-2">Manage Subjects, Topics, and Subtopics</label>
                            <div id="manageSubjectsContainer">
                                {exams.map((exam, examIndex) => (
                                    <div key={exam.name} className="mb-4">
                                        <h3 className="text-lg font-semibold">{exam.name}</h3>
                                        {exam.subjects.map((subject, subjectIndex) => (
                                            <div key={subject.name} className="ml-4 mb-2">
                                                <div className="flex items-center justify-between">
                                                    <h4 className="text-md font-medium">{subject.name}</h4>
                                                    <button
                                                        className="bg-red-500 text-white px-2 py-1 rounded-lg text-sm"
                                                        onClick={() => deleteSubject(examIndex, subjectIndex)}
                                                    >
                                                        Delete Subject
                                                    </button>
                                                </div>
                                                {subject.topics.map((topic, topicIndex) => (
                                                    <div key={topic.name} className="ml-4 mt-2">
                                                        <div className="flex items-center justify-between">
                                                            <span className="text-sm">{topic.name}</span>
                                                            <div className="flex gap-2">
                                                                <input
                                                                    type="text"
                                                                    placeholder="Google Drive Link"
                                                                    className="p-2 border rounded-lg text-sm"
                                                                    defaultValue={subject.driveLinks[topic.name] || ""}
                                                                    onBlur={(e) => {
                                                                        const link = e.target.value;
                                                                        if (link) {
                                                                            addDriveLink(examIndex, subjectIndex, topic.name, link);
                                                                        }
                                                                    }}
                                                                />
                                                                <button
                                                                    className="bg-red-500 text-white px-2 py-1 rounded-lg text-sm"
                                                                    onClick={() => deleteTopic(examIndex, subjectIndex, topic.name)}
                                                                >
                                                                    Delete Topic
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <div className="ml-4 mt-2">
                                                            {topic.subtopics.map(subtopic => (
                                                                <div key={subtopic} className="flex items-center justify-between text-sm mb-1">
                                                                    <span>{subtopic}</span>
                                                                    <button
                                                                        className="bg-red-500 text-white px-2 py-1 rounded-lg text-xs"
                                                                        onClick={() => deleteSubtopic(examIndex, subjectIndex, topicIndex, subtopic)}
                                                                    >
                                                                        Delete Subtopic
                                                                    </button>
                                                                </div>
                                                            ))}
                                                            <div className="flex gap-2 mt-2">
                                                                <input
                                                                    type="text"
                                                                    placeholder="Add Subtopic"
                                                                    className="p-2 border rounded-lg flex-1 text-sm"
                                                                    id={`subtopic-${examIndex}-${subjectIndex}-${topicIndex}`}
                                                                />
                                                                <button
                                                                    className="bg-blue-500 text-white px-2 py-1 rounded-lg text-sm"
                                                                    onClick={() => {
                                                                        const subtopic = document.getElementById(`subtopic-${examIndex}-${subjectIndex}-${topicIndex}`).value;
                                                                        if (subtopic) {
                                                                            addSubtopic(examIndex, subjectIndex, topicIndex, subtopic);
                                                                            document.getElementById(`subtopic-${examIndex}-${subjectIndex}-${topicIndex}`).value = "";
                                                                        }
                                                                    }}
                                                                >
                                                                    Add Subtopic
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        ))}
                                    </div>
                                ))}
                            </div>
                            <button
                                className="bg-yellow-500 text-white px-4 py-2 rounded-lg text-sm mt-4"
                                onClick={undoDelete}
                                disabled={undoStack.length === 0}
                            >
                                Undo Last Delete
                            </button>
                        </div>
                        <button
                            className="bg-green-500 text-white px-4 py-2 rounded-lg text-sm"
                            onClick={() => {
                                const examName = document.getElementById("examName").value;
                                const subjects = Array.from(document.querySelectorAll(".subject")).map(subject => {
                                    const subjectName = subject.querySelector('[data-type="subjectName"]').value;
                                    const topicsInput = subject.querySelector('[data-type="topics"]').value;
                                    const subtopicsInput = subject.querySelector('[data-type="subtopics"]').value;
                                    const topics = topicsInput.split(",").map(t => t.trim()).filter(t => t).map(name => ({
                                        name,
                                        subtopics: subtopicsInput ? subtopicsInput.split(",").map(s => s.trim()).filter(s => s) : [],
                                        completedSubtopics: []
                                    }));
                                    return { name: subjectName, topics, completedTopics: [], driveLinks: {} };
                                });
                                addExam(examName, subjects);
                            }}
                        >
                            Add Exam
                        </button>
                    </div>
                    <footer className="mt-8 text-center text-gray-600 text-sm">
                        Created By Akash Chaudhary ❤️
                    </footer>
                </div>
            );

            useEffect(() => {
                if (currentPage === "progressDashboard") {
                    const examProgressCtx = document.getElementById("examProgressChart").getContext("2d");
                    new Chart(examProgressCtx, {
                        type: "bar",
                        data: {
                            labels: exams.map(exam => exam.name),
                            datasets: [{
                                label: "Progress (%)",
                                data: exams.map(exam => getExamProgress(exam)),
                                backgroundColor: "rgba(59, 130, 246, 0.5)",
                                borderColor: "rgba(59, 130, 246, 1)",
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });

                    const studyTimeCtx = document.getElementById("studyTimeChart").getContext("2d");
                    const monthlyData = Object.entries(
                        studySessions.reduce((acc, session) => {
                            const month = new Date(session.date).toLocaleString('default', { month: 'long', year: 'numeric' });
                            acc[month] = (acc[month] || 0) + session.duration;
                            return acc;
                        }, {})
                    );
                    new Chart(studyTimeCtx, {
                        type: "line",
                        data: {
                            labels: monthlyData.map(([month]) => month),
                            datasets: [{
                                label: "Study Time (Hours)",
                                data: monthlyData.map(([, total]) => total / 60),
                                fill: false,
                                borderColor: "rgba(34, 197, 94, 1)",
                                tension: 0.1
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }
            }, [currentPage, exams, studySessions]);

            return (
                <div>
                    <nav className="bg-blue-600 text-white p-4 shadow-md">
                        <div className="container mx-auto flex justify-between items-center">
                            <div className="text-2xl font-bold">PrepTrack</div>
                            <div className="flex gap-4">
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setCurrentPage("home")}
                                >
                                    Home
                                </button>
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setCurrentPage("deadlines")}
                                >
                                    Deadlines
                                </button>
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setCurrentPage("studyTracker")}
                                >
                                    Study Tracker
                                </button>
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setCurrentPage("mockTests")}
                                >
                                    Mock Tests
                                </button>
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setCurrentPage("progressDashboard")}
                                >
                                    Progress Dashboard
                                </button>
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setCurrentPage("addExam")}
                                >
                                    Add Exam
                                </button>
                                <button
                                    className="hover:bg-blue-700 px-3 py-2 rounded-lg transition text-sm"
                                    onClick={() => setTheme(theme === "light" ? "dark" : "light")}
                                >
                                    {theme === "light" ? "Dark Mode" : "Light Mode"}
                                </button>
                            </div>
                        </div>
                    </nav>
                    {currentPage === "home" && renderHome()}
                    {currentPage === "deadlines" && renderDeadlines()}
                    {currentPage === "studyTracker" && renderStudyTracker()}
                    {currentPage === "mockTests" && renderMockTests()}
                    {currentPage === "progressDashboard" && renderProgressDashboard()}
                    {currentPage === "addExam" && renderAddExam()}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>
</html>